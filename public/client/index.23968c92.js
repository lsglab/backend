function t(t,e,s){const n=t.slice();return n[7]=e[s],n}function e(t,e,s){const n=t.slice();return n[10]=e[s],n}function s(s){let r,a,c,o=s[1].dirs,i=[];for(let t=0;t<o.length;t+=1)i[t]=n(e(s,o,t));const f=t=>T(i[t],1,1,()=>{i[t]=null});let $=s[1].files,m=[];for(let e=0;e<$.length;e+=1)m[e]=l(t(s,$,e));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();r=F();for(let t=0;t<m.length;t+=1)m[t].c();a=N()},l(t){for(let e=0;e<i.length;e+=1)i[e].l(t);r=V(t);for(let e=0;e<m.length;e+=1)m[e].l(t);a=N()},m(t,e){for(let s=0;s<i.length;s+=1)i[s].m(t,e);_(t,r,e);for(let s=0;s<m.length;s+=1)m[s].m(t,e);_(t,a,e),c=!0},p(s,c){if(3&c){let t;for(o=s[1].dirs,t=0;t<o.length;t+=1){const l=e(s,o,t);i[t]?(i[t].p(l,c),j(i[t],1)):(i[t]=n(l),i[t].c(),j(i[t],1),i[t].m(r.parentNode,r))}for(M(),t=o.length;t<i.length;t+=1)f(t);q()}if(3&c){let e;for($=s[1].files,e=0;e<$.length;e+=1){const n=t(s,$,e);m[e]?m[e].p(n,c):(m[e]=l(n),m[e].c(),m[e].m(a.parentNode,a))}for(;e<m.length;e+=1)m[e].d(1);m.length=$.length}},i(t){if(!c){for(let t=0;t<o.length;t+=1)j(i[t]);c=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)T(i[t]);c=!1},d(t){U(i,t),t&&K(r),U(m,t),t&&K(a)}}}function n(t){function e(e){t[5].call(null,e)}let s,n,l,r={dir:t[10]};return void 0!==t[0]&&(r.selectedFile=t[0]),s=new DirNode({props:r}),W.push(()=>X(s,"selectedFile",e)),{c(){B(s.$$.fragment)},l(t){S(s.$$.fragment,t)},m(t,e){k(s,t,e),l=!0},p(t,e){const l={};2&e&&(l.dir=t[10]),!n&&1&e&&(n=!0,l.selectedFile=t[0],P(()=>n=!1)),s.$set(l)},i(t){l||(j(s.$$.fragment,t),l=!0)},o(t){T(s.$$.fragment,t),l=!1},d(t){G(s,t)}}}function l(t){function e(...e){return t[6](t[7],...e)}let s,n,l,r,a,c,o,i,f,$=t[7].filename+"";return{c(){s=z("div"),n=z("div"),l=A("description"),r=F(),a=z("p"),c=A($),o=F(),this.h()},l(t){var e,i,f;s=C(t,"DIV",{class:!0}),e=H(s),n=C(e,"DIV",{class:!0}),i=H(n),l=J(i,"description"),i.forEach(K),r=V(e),a=C(e,"P",{class:!0}),f=H(a),c=J(f,$),f.forEach(K),o=V(e),e.forEach(K),this.h()},h(){O(n,"class","text-red-400 material-icons"),O(a,"class","name svelte-19gl0yc"),O(s,"class","flex flex-row items-center ml-4 cursor-pointer")},m(t,$){_(t,s,$),R(s,n),R(n,l),R(s,r),R(s,a),R(a,c),R(s,o),i||(f=L(s,"click",e),i=!0)},p(e,s){t=e,2&s&&$!==($=t[7].filename+"")&&Q(c,$)},d(t){t&&K(s),i=!1,f()}}}function r(t){let e,n,l,r,a,c,o,i,f,$,m,u,d,h,p,g=t[3]?"arrow_drop_down":"arrow_right",w=t[3]?"folder_open":"folder",x=t[1].name+"",v=t[3]&&s(t);return{c(){e=z("div"),n=z("div"),l=z("div"),r=A(g),a=F(),c=z("div"),o=A(w),i=F(),f=z("p"),$=A(x),m=F(),v&&v.c(),this.h()},l(t){var s,u,d,h,p;e=C(t,"DIV",{class:!0}),s=H(e),n=C(s,"DIV",{class:!0}),u=H(n),l=C(u,"DIV",{class:!0}),d=H(l),r=J(d,g),d.forEach(K),a=V(u),c=C(u,"DIV",{class:!0}),h=H(c),o=J(h,w),h.forEach(K),i=V(u),f=C(u,"P",{class:!0}),p=H(f),$=J(p,x),p.forEach(K),u.forEach(K),m=V(s),v&&v.l(s),s.forEach(K),this.h()},h(){O(l,"class","text-black material-icons"),O(c,"class","text-xl text-yellow-300 material-icons"),O(f,"class","name svelte-19gl0yc"),O(n,"class","flex flex-row items-center cursor-pointer"),O(e,"class",u=t[2]?"":"ml-3")},m(s,u){_(s,e,u),R(e,n),R(n,l),R(l,r),R(n,a),R(n,c),R(c,o),R(n,i),R(n,f),R(f,$),R(e,m),v&&v.m(e,null),d=!0,h||(p=L(n,"click",t[4]),h=!0)},p(t,[n]){(!d||8&n)&&g!==(g=t[3]?"arrow_drop_down":"arrow_right")&&Q(r,g),(!d||8&n)&&w!==(w=t[3]?"folder_open":"folder")&&Q(o,w),(!d||2&n)&&x!==(x=t[1].name+"")&&Q($,x),t[3]?v?(v.p(t,n),8&n&&j(v,1)):(v=s(t),v.c(),j(v,1),v.m(e,null)):v&&(M(),T(v,1,1,()=>{v=null}),q()),(!d||4&n&&u!==(u=t[2]?"":"ml-3"))&&O(e,"class",u)},i(t){d||(j(v),d=!0)},o(t){T(v),d=!1},d(t){t&&K(e),v&&v.d(),h=!1,p()}}}function a(t,e,s){let{dir:n}=e,{first:l=!1}=e,{selectedFile:r=null}=e,a=l;return t.$$set=t=>{"dir"in t&&s(1,n=t.dir),"first"in t&&s(2,l=t.first),"selectedFile"in t&&s(0,r=t.selectedFile)},[r,n,l,a,function(){s(3,a=!a)},function(t){r=t,s(0,r)},t=>{s(0,r=t)}]}function c(t){function e(e){t[3].call(null,e)}let s,n,l,r={dir:t[0],first:!0};return void 0!==t[1]&&(r.selectedFile=t[1]),s=new DirNode({props:r}),W.push(()=>X(s,"selectedFile",e)),{c(){B(s.$$.fragment)},l(t){S(s.$$.fragment,t)},m(t,e){k(s,t,e),l=!0},p(t,e){const l={};1&e&&(l.dir=t[0]),!n&&2&e&&(n=!0,l.selectedFile=t[1],P(()=>n=!1)),s.$set(l)},i(t){l||(j(s.$$.fragment,t),l=!0)},o(t){T(s.$$.fragment,t),l=!1},d(t){G(s,t)}}}function o(t){let e,s;return e=new Y({props:{classes:"w-full h-full",justify:"center",align:"center",$$slots:{default:[i]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,n){k(e,t,n),s=!0},p(t,s){const n={};1024&s&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){s||(j(e.$$.fragment,t),s=!0)},o(t){T(e.$$.fragment,t),s=!1},d(t){G(e,t)}}}function i(){let t,e;return t=new st({}),{c(){B(t.$$.fragment)},l(e){S(t.$$.fragment,e)},m(s,n){k(t,s,n),e=!0},i(s){e||(j(t.$$.fragment,s),e=!0)},o(s){T(t.$$.fragment,s),e=!1},d(e){G(t,e)}}}function f(t){let e,s,n,l,r,a,c,o,i,f;n=new Y({props:{classes:"w-full h-full px-3 py-2 border-gray-100 border-b-2",justify:"between",align:"center",$$slots:{default:[h]},$$scope:{ctx:t}}});let $=t[2]&&p(t);return{c(){e=z("div"),s=z("div"),B(n.$$.fragment),l=F(),r=z("div"),$&&$.c(),a=F(),c=z("iframe"),this.h()},l(t){var o,i,f;e=C(t,"DIV",{class:!0}),o=H(e),s=C(o,"DIV",{style:!0}),i=H(s),S(n.$$.fragment,i),i.forEach(K),l=V(o),r=C(o,"DIV",{class:!0,style:!0}),f=H(r),$&&$.l(f),a=V(f),c=C(f,"IFRAME",{id:!0,class:!0,title:!0,src:!0}),H(c).forEach(K),f.forEach(K),o.forEach(K),this.h()},h(){nt(s,"height","8%"),O(c,"id","iframe"),O(c,"class","w-full h-full"),O(c,"title",o=t[1].name),c.src!==(i="http://localhost:8000/"+t[1].url)&&O(c,"src",i),O(r,"class","relative"),nt(r,"height","92%"),O(e,"class","w-3/4 h-full")},m(t,o){_(t,e,o),R(e,s),k(n,s,null),R(e,l),R(e,r),$&&$.m(r,null),R(r,a),R(r,c),f=!0},p(t,e){const s={};1026&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s),t[2]?$?4&e&&j($,1):($=p(t),$.c(),j($,1),$.m(r,a)):$&&(M(),T($,1,1,()=>{$=null}),q()),(!f||2&e&&o!==(o=t[1].name))&&O(c,"title",o),(!f||2&e&&c.src!==(i="http://localhost:8000/"+t[1].url))&&O(c,"src",i)},i(t){f||(j(n.$$.fragment,t),j($),f=!0)},o(t){T(n.$$.fragment,t),T($),f=!1},d(t){t&&K(e),G(n),$&&$.d()}}}function $(t){let e,s;return e=new Y({props:{classes:"w-3/4 h-full",justify:"center",align:"center",cols:"true",$$slots:{default:[x]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,n){k(e,t,n),s=!0},p(t,s){const n={};1024&s&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){s||(j(e.$$.fragment,t),s=!0)},o(t){T(e.$$.fragment,t),s=!1},d(t){G(e,t)}}}function m(){let t;return{c(){t=A("Bearbeiten")},l(e){t=J(e,"Bearbeiten")},m(e,s){_(e,t,s)},d(e){e&&K(t)}}}function u(t){let e,s,n,l,r,a,c=t[1].path+"",o=t[1].filename+"";return r=new lt({props:{href:"/cms/frontend/"+t[1].id,$$slots:{default:[m]},$$scope:{ctx:t}}}),{c(){e=z("p"),s=A(c),n=A(o),l=F(),B(r.$$.fragment),this.h()},l(t){e=C(t,"P",{class:!0});var a=H(e);s=J(a,c),n=J(a,o),a.forEach(K),l=V(t),S(r.$$.fragment,t),this.h()},h(){O(e,"class","mr-4 font-bold text-xss")},m(t,c){_(t,e,c),R(e,s),R(e,n),_(t,l,c),k(r,t,c),a=!0},p(t,e){(!a||2&e)&&c!==(c=t[1].path+"")&&Q(s,c),(!a||2&e)&&o!==(o=t[1].filename+"")&&Q(n,o);const l={};2&e&&(l.href="/cms/frontend/"+t[1].id),1024&e&&(l.$$scope={dirty:e,ctx:t}),r.$set(l)},i(t){a||(j(r.$$.fragment,t),a=!0)},o(t){T(r.$$.fragment,t),a=!1},d(t){t&&K(e),t&&K(l),G(r,t)}}}function d(){let t;return{c(){t=A("Neue Seite Erstellen")},l(e){t=J(e,"Neue Seite Erstellen")},m(e,s){_(e,t,s)},d(e){e&&K(t)}}}function h(t){let e,s,n,l;return e=new Y({props:{$$slots:{default:[u]},$$scope:{ctx:t}}}),n=new lt({props:{color:"bg-cmsSuccessGreen",href:"/cms/frontend/new",$$slots:{default:[d]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment),s=F(),B(n.$$.fragment)},l(t){S(e.$$.fragment,t),s=V(t),S(n.$$.fragment,t)},m(t,r){k(e,t,r),_(t,s,r),k(n,t,r),l=!0},p(t,s){const l={};1026&s&&(l.$$scope={dirty:s,ctx:t}),e.$set(l);const r={};1024&s&&(r.$$scope={dirty:s,ctx:t}),n.$set(r)},i(t){l||(j(e.$$.fragment,t),j(n.$$.fragment,t),l=!0)},o(t){T(e.$$.fragment,t),T(n.$$.fragment,t),l=!1},d(t){G(e,t),t&&K(s),G(n,t)}}}function p(t){let e,s,n;return s=new Y({props:{justify:"center",align:"center",classes:"w-full h-full",$$slots:{default:[g]},$$scope:{ctx:t}}}),{c(){e=z("div"),B(s.$$.fragment),this.h()},l(t){e=C(t,"DIV",{class:!0});var n=H(e);S(s.$$.fragment,n),n.forEach(K),this.h()},h(){O(e,"class","absolute top-0 bottom-0 left-0 right-0 bg-white")},m(t,l){_(t,e,l),k(s,e,null),n=!0},i(t){n||(j(s.$$.fragment,t),n=!0)},o(t){T(s.$$.fragment,t),n=!1},d(t){t&&K(e),G(s)}}}function g(){let t,e;return t=new st({}),{c(){B(t.$$.fragment)},l(e){S(t.$$.fragment,e)},m(s,n){k(t,s,n),e=!0},i(s){e||(j(t.$$.fragment,s),e=!0)},o(s){T(t.$$.fragment,s),e=!1},d(e){G(t,e)}}}function w(){let t;return{c(){t=A("Neue Seite erstellen")},l(e){t=J(e,"Neue Seite erstellen")},m(e,s){_(e,t,s)},d(e){e&&K(t)}}}function x(t){let e,s,n,l,r;return l=new lt({props:{href:"/cms/frontend/new",$$slots:{default:[w]},$$scope:{ctx:t}}}),{c(){e=z("div"),s=A("note_add"),n=F(),B(l.$$.fragment),this.h()},l(t){e=C(t,"DIV",{class:!0});var r=H(e);s=J(r,"note_add"),r.forEach(K),n=V(t),S(l.$$.fragment,t),this.h()},h(){O(e,"class","m-5 text-5xl text-gray-200 material-icons")},m(t,a){_(t,e,a),R(e,s),_(t,n,a),k(l,t,a),r=!0},p(t,e){const s={};1024&e&&(s.$$scope={dirty:e,ctx:t}),l.$set(s)},i(t){r||(j(l.$$.fragment,t),r=!0)},o(t){T(l.$$.fragment,t),r=!1},d(t){t&&K(e),t&&K(n),G(l,t)}}}function v(t){function e(t){return void 0===t[0]?0:1}function s(t){return null==t[1]?0:1}let n,l,r,a,i,m,u,d;const h=[o,c],p=[];l=e(t),r=p[l]=h[l](t);const g=[$,f],w=[];return i=s(t),m=w[i]=g[i](t),{c(){n=z("div"),r.c(),a=F(),m.c(),u=N(),this.h()},l(t){n=C(t,"DIV",{class:!0});var e=H(n);r.l(e),e.forEach(K),a=V(t),m.l(t),u=N(),this.h()},h(){O(n,"class","w-1/4 border-r-2 border-gray-100")},m(t,e){_(t,n,e),p[l].m(n,null),_(t,a,e),w[i].m(t,e),_(t,u,e),d=!0},p(t,a){let c=l;l=e(t),l===c?p[l].p(t,a):(M(),T(p[c],1,1,()=>{p[c]=null}),q(),r=p[l],r||(r=p[l]=h[l](t),r.c()),j(r,1),r.m(n,null));let o=i;i=s(t),i===o?w[i].p(t,a):(M(),T(w[o],1,1,()=>{w[o]=null}),q(),m=w[i],m||(m=w[i]=g[i](t),m.c()),j(m,1),m.m(u.parentNode,u))},i(t){d||(j(r),j(m),d=!0)},o(t){T(r),T(m),d=!1},d(t){t&&K(n),p[l].d(),t&&K(a),w[i].d(t),t&&K(u)}}}function y(t){let e,s,n,l;return e=new rt({}),n=new Y({props:{classes:"w-full full-minus-nav",$$slots:{default:[v]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment),s=F(),B(n.$$.fragment)},l(t){S(e.$$.fragment,t),s=V(t),S(n.$$.fragment,t)},m(t,r){k(e,t,r),_(t,s,r),k(n,t,r),l=!0},p(t,[e]){const s={};1031&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s)},i(t){l||(j(e.$$.fragment,t),j(n.$$.fragment,t),l=!0)},o(t){T(e.$$.fragment,t),T(n.$$.fragment,t),l=!1},d(t){G(e,t),t&&K(s),G(n,t)}}}function b(t,e,s){let n,l,r,a,c;return Z(async()=>{await async function(){const t=await tt("http://localhost:8000/api/tables?table=sites","get",{},!0);200===t.status&&(a=new at(t.data.tables[0]))}(),async function(){const t=await tt("http://localhost:8000/api/sites?_norelations=true","get",{},!0);200===t.status&&(n=t.data.sites,function(){const t={dirs:[],files:[],name:"/"};n.forEach(e=>{if(!a.getPermissions(e.id).read)return;const s=e.path.split("/");s.shift();let n=t;s.forEach(t=>{if(""===t)return;const e=n.dirs.find(e=>e.name===t);if(void 0!==e)n=e;else{const e=n.dirs.push({dirs:[],files:[],name:t});n=n.dirs[e-1]}}),n.files.push(e)}),s(0,l=t)}())}()}),t.$$.update=()=>{2&t.$$.dirty&&async function(){null!=r&&(await et(),s(2,c=!0),document.getElementById("iframe").onload=()=>{s(2,c=!1)})}()},[l,r,c,function(t){r=t,s(1,r)}]}import{S as E,i as D,s as I,a as F,y as N,h as V,m as _,p as j,c as B,j as S,o as k,O as P,q as T,r as G,G as M,H as q,e as z,t as A,b as C,d as H,f as J,g as K,k as O,n as R,N as L,C as Q,z as U,K as W,M as X,F as Y,J as Z,$ as tt,a6 as et,_ as st,l as nt}from"./client.897a0b43.js";import{B as lt}from"./Button.a01b7f4c.js";import{T as rt}from"./TopNav.2681359b.js";import{T as at}from"./table.8f7a7926.js";class DirNode extends E{constructor(t){super(),D(this,t,a,r,I,{dir:1,first:2,selectedFile:0})}}export default class Frontend extends E{constructor(t){super(),D(this,t,b,y,I,{})}}
