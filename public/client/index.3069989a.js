function e(e,t,s){const n=e.slice();return n[7]=t[s],n}function t(e,t,s){const n=e.slice();return n[10]=t[s],n}function s(s){let l,a,c,o=s[1].dirs,i=[];for(let e=0;e<o.length;e+=1)i[e]=n(t(s,o,e));const f=e=>T(i[e],1,1,()=>{i[e]=null});let $=s[1].files,m=[];for(let t=0;t<$.length;t+=1)m[t]=r(e(s,$,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();l=F();for(let e=0;e<m.length;e+=1)m[e].c();a=N()},l(e){for(let t=0;t<i.length;t+=1)i[t].l(e);l=V(e);for(let t=0;t<m.length;t+=1)m[t].l(e);a=N()},m(e,t){for(let s=0;s<i.length;s+=1)i[s].m(e,t);_(e,l,t);for(let s=0;s<m.length;s+=1)m[s].m(e,t);_(e,a,t),c=!0},p(s,c){if(3&c){let e;for(o=s[1].dirs,e=0;e<o.length;e+=1){const r=t(s,o,e);i[e]?(i[e].p(r,c),j(i[e],1)):(i[e]=n(r),i[e].c(),j(i[e],1),i[e].m(l.parentNode,l))}for(M(),e=o.length;e<i.length;e+=1)f(e);q()}if(3&c){let t;for($=s[1].files,t=0;t<$.length;t+=1){const n=e(s,$,t);m[t]?m[t].p(n,c):(m[t]=r(n),m[t].c(),m[t].m(a.parentNode,a))}for(;t<m.length;t+=1)m[t].d(1);m.length=$.length}},i(e){if(!c){for(let e=0;e<o.length;e+=1)j(i[e]);c=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)T(i[e]);c=!1},d(e){U(i,e),e&&K(l),U(m,e),e&&K(a)}}}function n(e){function t(t){e[5].call(null,t)}let s,n,r,l={dir:e[10]};return void 0!==e[0]&&(l.selectedFile=e[0]),s=new DirNode({props:l}),W.push(()=>X(s,"selectedFile",t)),{c(){B(s.$$.fragment)},l(e){S(s.$$.fragment,e)},m(e,t){k(s,e,t),r=!0},p(e,t){const r={};2&t&&(r.dir=e[10]),!n&&1&t&&(n=!0,r.selectedFile=e[0],P(()=>n=!1)),s.$set(r)},i(e){r||(j(s.$$.fragment,e),r=!0)},o(e){T(s.$$.fragment,e),r=!1},d(e){G(s,e)}}}function r(e){function t(...t){return e[6](e[7],...t)}let s,n,r,l,a,c,o,i,f,$=e[7].filename+"";return{c(){s=z("div"),n=z("div"),r=A("description"),l=F(),a=z("p"),c=A($),o=F(),this.h()},l(e){var t,i,f;s=C(e,"DIV",{class:!0}),t=H(s),n=C(t,"DIV",{class:!0}),i=H(n),r=J(i,"description"),i.forEach(K),l=V(t),a=C(t,"P",{class:!0}),f=H(a),c=J(f,$),f.forEach(K),o=V(t),t.forEach(K),this.h()},h(){O(n,"class","text-red-400 material-icons"),O(a,"class","name svelte-19gl0yc"),O(s,"class","flex flex-row items-center ml-4 cursor-pointer")},m(e,$){_(e,s,$),R(s,n),R(n,r),R(s,l),R(s,a),R(a,c),R(s,o),i||(f=L(s,"click",t),i=!0)},p(t,s){e=t,2&s&&$!==($=e[7].filename+"")&&Q(c,$)},d(e){e&&K(s),i=!1,f()}}}function l(e){let t,n,r,l,a,c,o,i,f,$,m,d,u,h,p,g=e[3]?"arrow_drop_down":"arrow_right",w=e[3]?"folder_open":"folder",x=e[1].name+"",v=e[3]&&s(e);return{c(){t=z("div"),n=z("div"),r=z("div"),l=A(g),a=F(),c=z("div"),o=A(w),i=F(),f=z("p"),$=A(x),m=F(),v&&v.c(),this.h()},l(e){var s,d,u,h,p;t=C(e,"DIV",{class:!0}),s=H(t),n=C(s,"DIV",{class:!0}),d=H(n),r=C(d,"DIV",{class:!0}),u=H(r),l=J(u,g),u.forEach(K),a=V(d),c=C(d,"DIV",{class:!0}),h=H(c),o=J(h,w),h.forEach(K),i=V(d),f=C(d,"P",{class:!0}),p=H(f),$=J(p,x),p.forEach(K),d.forEach(K),m=V(s),v&&v.l(s),s.forEach(K),this.h()},h(){O(r,"class","text-black material-icons"),O(c,"class","text-xl text-yellow-300 material-icons"),O(f,"class","name svelte-19gl0yc"),O(n,"class","flex flex-row items-center cursor-pointer"),O(t,"class",d=e[2]?"":"ml-3")},m(s,d){_(s,t,d),R(t,n),R(n,r),R(r,l),R(n,a),R(n,c),R(c,o),R(n,i),R(n,f),R(f,$),R(t,m),v&&v.m(t,null),u=!0,h||(p=L(n,"click",e[4]),h=!0)},p(e,[n]){(!u||8&n)&&g!==(g=e[3]?"arrow_drop_down":"arrow_right")&&Q(l,g),(!u||8&n)&&w!==(w=e[3]?"folder_open":"folder")&&Q(o,w),(!u||2&n)&&x!==(x=e[1].name+"")&&Q($,x),e[3]?v?(v.p(e,n),8&n&&j(v,1)):(v=s(e),v.c(),j(v,1),v.m(t,null)):v&&(M(),T(v,1,1,()=>{v=null}),q()),(!u||4&n&&d!==(d=e[2]?"":"ml-3"))&&O(t,"class",d)},i(e){u||(j(v),u=!0)},o(e){T(v),u=!1},d(e){e&&K(t),v&&v.d(),h=!1,p()}}}function a(e,t,s){let{dir:n}=t,{first:r=!1}=t,{selectedFile:l=null}=t,a=r;return e.$$set=e=>{"dir"in e&&s(1,n=e.dir),"first"in e&&s(2,r=e.first),"selectedFile"in e&&s(0,l=e.selectedFile)},[l,n,r,a,function(){s(3,a=!a)},function(e){l=e,s(0,l)},e=>{s(0,l=e)}]}function c(e){function t(t){e[3].call(null,t)}let s,n,r,l={dir:e[0],first:!0};return void 0!==e[1]&&(l.selectedFile=e[1]),s=new DirNode({props:l}),W.push(()=>X(s,"selectedFile",t)),{c(){B(s.$$.fragment)},l(e){S(s.$$.fragment,e)},m(e,t){k(s,e,t),r=!0},p(e,t){const r={};1&t&&(r.dir=e[0]),!n&&2&t&&(n=!0,r.selectedFile=e[1],P(()=>n=!1)),s.$set(r)},i(e){r||(j(s.$$.fragment,e),r=!0)},o(e){T(s.$$.fragment,e),r=!1},d(e){G(s,e)}}}function o(e){let t,s;return t=new Y({props:{classes:"w-full h-full",justify:"center",align:"center",$$slots:{default:[i]},$$scope:{ctx:e}}}),{c(){B(t.$$.fragment)},l(e){S(t.$$.fragment,e)},m(e,n){k(t,e,n),s=!0},p(e,s){const n={};1024&s&&(n.$$scope={dirty:s,ctx:e}),t.$set(n)},i(e){s||(j(t.$$.fragment,e),s=!0)},o(e){T(t.$$.fragment,e),s=!1},d(e){G(t,e)}}}function i(){let e,t;return e=new se({}),{c(){B(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(s,n){k(e,s,n),t=!0},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){T(e.$$.fragment,s),t=!1},d(t){G(e,t)}}}function f(e){let t,s,n,r,l,a,c,o,i,f;n=new Y({props:{classes:"w-full h-full px-3 py-2 border-gray-100 border-b-2",justify:"between",align:"center",$$slots:{default:[h]},$$scope:{ctx:e}}});let $=e[2]&&p(e);return{c(){t=z("div"),s=z("div"),B(n.$$.fragment),r=F(),l=z("div"),$&&$.c(),a=F(),c=z("iframe"),this.h()},l(e){var o,i,f;t=C(e,"DIV",{class:!0}),o=H(t),s=C(o,"DIV",{style:!0}),i=H(s),S(n.$$.fragment,i),i.forEach(K),r=V(o),l=C(o,"DIV",{class:!0,style:!0}),f=H(l),$&&$.l(f),a=V(f),c=C(f,"IFRAME",{id:!0,class:!0,title:!0,src:!0}),H(c).forEach(K),f.forEach(K),o.forEach(K),this.h()},h(){ne(s,"height","8%"),O(c,"id","iframe"),O(c,"class","w-full h-full"),O(c,"title",o=e[1].name),c.src!==(i=""+e[1].url)&&O(c,"src",i),O(l,"class","relative"),ne(l,"height","92%"),O(t,"class","w-3/4 h-full")},m(e,o){_(e,t,o),R(t,s),k(n,s,null),R(t,r),R(t,l),$&&$.m(l,null),R(l,a),R(l,c),f=!0},p(e,t){const s={};1026&t&&(s.$$scope={dirty:t,ctx:e}),n.$set(s),e[2]?$?4&t&&j($,1):($=p(e),$.c(),j($,1),$.m(l,a)):$&&(M(),T($,1,1,()=>{$=null}),q()),(!f||2&t&&o!==(o=e[1].name))&&O(c,"title",o),(!f||2&t&&c.src!==(i=""+e[1].url))&&O(c,"src",i)},i(e){f||(j(n.$$.fragment,e),j($),f=!0)},o(e){T(n.$$.fragment,e),T($),f=!1},d(e){e&&K(t),G(n),$&&$.d()}}}function $(e){let t,s;return t=new Y({props:{classes:"w-3/4 h-full",justify:"center",align:"center",cols:"true",$$slots:{default:[x]},$$scope:{ctx:e}}}),{c(){B(t.$$.fragment)},l(e){S(t.$$.fragment,e)},m(e,n){k(t,e,n),s=!0},p(e,s){const n={};1024&s&&(n.$$scope={dirty:s,ctx:e}),t.$set(n)},i(e){s||(j(t.$$.fragment,e),s=!0)},o(e){T(t.$$.fragment,e),s=!1},d(e){G(t,e)}}}function m(){let e;return{c(){e=A("Bearbeiten")},l(t){e=J(t,"Bearbeiten")},m(t,s){_(t,e,s)},d(t){t&&K(e)}}}function d(e){let t,s,n,r,l,a,c=e[1].path+"",o=e[1].filename+"";return l=new re({props:{href:"/cms/frontend/"+e[1].id,$$slots:{default:[m]},$$scope:{ctx:e}}}),{c(){t=z("p"),s=A(c),n=A(o),r=F(),B(l.$$.fragment),this.h()},l(e){t=C(e,"P",{class:!0});var a=H(t);s=J(a,c),n=J(a,o),a.forEach(K),r=V(e),S(l.$$.fragment,e),this.h()},h(){O(t,"class","mr-4 font-bold text-xss")},m(e,c){_(e,t,c),R(t,s),R(t,n),_(e,r,c),k(l,e,c),a=!0},p(e,t){(!a||2&t)&&c!==(c=e[1].path+"")&&Q(s,c),(!a||2&t)&&o!==(o=e[1].filename+"")&&Q(n,o);const r={};2&t&&(r.href="/cms/frontend/"+e[1].id),1024&t&&(r.$$scope={dirty:t,ctx:e}),l.$set(r)},i(e){a||(j(l.$$.fragment,e),a=!0)},o(e){T(l.$$.fragment,e),a=!1},d(e){e&&K(t),e&&K(r),G(l,e)}}}function u(){let e;return{c(){e=A("Neue Seite Erstellen")},l(t){e=J(t,"Neue Seite Erstellen")},m(t,s){_(t,e,s)},d(t){t&&K(e)}}}function h(e){let t,s,n,r;return t=new Y({props:{$$slots:{default:[d]},$$scope:{ctx:e}}}),n=new re({props:{color:"bg-cmsSuccessGreen",href:"/cms/frontend/new",$$slots:{default:[u]},$$scope:{ctx:e}}}),{c(){B(t.$$.fragment),s=F(),B(n.$$.fragment)},l(e){S(t.$$.fragment,e),s=V(e),S(n.$$.fragment,e)},m(e,l){k(t,e,l),_(e,s,l),k(n,e,l),r=!0},p(e,s){const r={};1026&s&&(r.$$scope={dirty:s,ctx:e}),t.$set(r);const l={};1024&s&&(l.$$scope={dirty:s,ctx:e}),n.$set(l)},i(e){r||(j(t.$$.fragment,e),j(n.$$.fragment,e),r=!0)},o(e){T(t.$$.fragment,e),T(n.$$.fragment,e),r=!1},d(e){G(t,e),e&&K(s),G(n,e)}}}function p(e){let t,s,n;return s=new Y({props:{justify:"center",align:"center",classes:"w-full h-full",$$slots:{default:[g]},$$scope:{ctx:e}}}),{c(){t=z("div"),B(s.$$.fragment),this.h()},l(e){t=C(e,"DIV",{class:!0});var n=H(t);S(s.$$.fragment,n),n.forEach(K),this.h()},h(){O(t,"class","absolute top-0 bottom-0 left-0 right-0 bg-white")},m(e,r){_(e,t,r),k(s,t,null),n=!0},i(e){n||(j(s.$$.fragment,e),n=!0)},o(e){T(s.$$.fragment,e),n=!1},d(e){e&&K(t),G(s)}}}function g(){let e,t;return e=new se({}),{c(){B(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(s,n){k(e,s,n),t=!0},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){T(e.$$.fragment,s),t=!1},d(t){G(e,t)}}}function w(){let e;return{c(){e=A("Neue Seite erstellen")},l(t){e=J(t,"Neue Seite erstellen")},m(t,s){_(t,e,s)},d(t){t&&K(e)}}}function x(e){let t,s,n,r,l;return r=new re({props:{href:"/cms/frontend/new",$$slots:{default:[w]},$$scope:{ctx:e}}}),{c(){t=z("div"),s=A("note_add"),n=F(),B(r.$$.fragment),this.h()},l(e){t=C(e,"DIV",{class:!0});var l=H(t);s=J(l,"note_add"),l.forEach(K),n=V(e),S(r.$$.fragment,e),this.h()},h(){O(t,"class","m-5 text-5xl text-gray-200 material-icons")},m(e,a){_(e,t,a),R(t,s),_(e,n,a),k(r,e,a),l=!0},p(e,t){const s={};1024&t&&(s.$$scope={dirty:t,ctx:e}),r.$set(s)},i(e){l||(j(r.$$.fragment,e),l=!0)},o(e){T(r.$$.fragment,e),l=!1},d(e){e&&K(t),e&&K(n),G(r,e)}}}function v(e){function t(e){return void 0===e[0]?0:1}function s(e){return null==e[1]?0:1}let n,r,l,a,i,m,d,u;const h=[o,c],p=[];r=t(e),l=p[r]=h[r](e);const g=[$,f],w=[];return i=s(e),m=w[i]=g[i](e),{c(){n=z("div"),l.c(),a=F(),m.c(),d=N(),this.h()},l(e){n=C(e,"DIV",{class:!0});var t=H(n);l.l(t),t.forEach(K),a=V(e),m.l(e),d=N(),this.h()},h(){O(n,"class","w-1/4 border-r-2 border-gray-100")},m(e,t){_(e,n,t),p[r].m(n,null),_(e,a,t),w[i].m(e,t),_(e,d,t),u=!0},p(e,a){let c=r;r=t(e),r===c?p[r].p(e,a):(M(),T(p[c],1,1,()=>{p[c]=null}),q(),l=p[r],l||(l=p[r]=h[r](e),l.c()),j(l,1),l.m(n,null));let o=i;i=s(e),i===o?w[i].p(e,a):(M(),T(w[o],1,1,()=>{w[o]=null}),q(),m=w[i],m||(m=w[i]=g[i](e),m.c()),j(m,1),m.m(d.parentNode,d))},i(e){u||(j(l),j(m),u=!0)},o(e){T(l),T(m),u=!1},d(e){e&&K(n),p[r].d(),e&&K(a),w[i].d(e),e&&K(d)}}}function y(e){let t,s,n,r;return t=new le({}),n=new Y({props:{classes:"w-full full-minus-nav",$$slots:{default:[v]},$$scope:{ctx:e}}}),{c(){B(t.$$.fragment),s=F(),B(n.$$.fragment)},l(e){S(t.$$.fragment,e),s=V(e),S(n.$$.fragment,e)},m(e,l){k(t,e,l),_(e,s,l),k(n,e,l),r=!0},p(e,[t]){const s={};1031&t&&(s.$$scope={dirty:t,ctx:e}),n.$set(s)},i(e){r||(j(t.$$.fragment,e),j(n.$$.fragment,e),r=!0)},o(e){T(t.$$.fragment,e),T(n.$$.fragment,e),r=!1},d(e){G(t,e),e&&K(s),G(n,e)}}}function b(e,t,s){let n,r,l,a,c;return Z(async()=>{await async function(){const e=await ee("/api/tables?table=sites","get",{},!0);200===e.status&&(a=new ae(e.data.tables[0]))}(),async function(){const e=await ee("/api/sites?_norelations=true","get",{},!0);200===e.status&&(n=e.data.sites,function(){const e={dirs:[],files:[],name:"/"};n.forEach(t=>{if(!a.getPermissions(t.id).read)return;const s=t.path.split("/");s.shift();let n=e;s.forEach(e=>{if(""===e)return;const t=n.dirs.find(t=>t.name===e);if(void 0!==t)n=t;else{const t=n.dirs.push({dirs:[],files:[],name:e});n=n.dirs[t-1]}}),n.files.push(t)}),s(0,r=e)}())}()}),e.$$.update=()=>{2&e.$$.dirty&&async function(){null!=l&&(await te(),s(2,c=!0),document.getElementById("iframe").onload=()=>{s(2,c=!1)})}()},[r,l,c,function(e){l=e,s(1,l)}]}import{S as E,i as D,s as I,a as F,y as N,h as V,m as _,p as j,c as B,j as S,o as k,O as P,q as T,r as G,G as M,H as q,e as z,t as A,b as C,d as H,f as J,g as K,k as O,n as R,N as L,C as Q,z as U,K as W,M as X,F as Y,J as Z,$ as ee,a6 as te,_ as se,l as ne}from"./client.b007dbf1.js";import"./time.4604e9c6.js";import{B as re}from"./Button.b1699f39.js";import{T as le}from"./TopNav.65515bb5.js";import{T as ae}from"./table.f0d17de5.js";class DirNode extends E{constructor(e){super(),D(this,e,a,l,I,{dir:1,first:2,selectedFile:0})}}export default class Frontend extends E{constructor(e){super(),D(this,e,b,y,I,{})}}
